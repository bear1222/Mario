window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({ActorController:[function(t,e,o){"use strict";cc._RF.push(e,"c209aMcFhZE64cK1e5CWMco","ActorController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=t("./GameManager"),s=t("./input/Controller"),l=t("./Goomba"),p=cc._decorator,u=p.ccclass,d=p.property;(function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"})(c||(c={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initialFacingDirection=c.Right,e._animation=null,e._rigidbody=null,e.physicManager=null,e.physicsboxCollider=null,e.small=!0,e.alive=!0,e.preJumpPressed=!1,e.noHurt=!1,e.gameManager=null,e.smallFrame=null,e.bigFrame=null,e.dieFrame=null,e.addPointsPrefab=null,e.jumpVel=700,e.moveSpeed=340,e.moveAxisX=0,e.moveAxisY=0,e.fallDown=!1,e}return i(e,t),Object.defineProperty(e.prototype,"moveAxis2D",{get:function(){return new cc.Vec2(this.moveAxisX,this.moveAxisY)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._animation=this.node.getComponent(cc.Animation),this._animation||console.warn("ActorController: Component cc.Animation missing on node "+this.node.name),this._rigidbody=this.node.getComponent(cc.RigidBody),this._rigidbody||console.warn("ActorController: Component cc.Rigidbody missing on node "+this.node.name),cc.director.getPhysicsManager().enabled=!0,this._rigidbody.gravityScale=5,this.physicManager=cc.director.getPhysicsManager(),this.physicManager.enabled=!0,console.log("frame rate:",cc.game.getFrameRate()),console.log("gravity:",this.physicManager.gravity),console.log("fix time step:",cc.PhysicsManager.FIXED_TIME_STEP),this.physicsboxCollider=this.getComponent(cc.PhysicsBoxCollider),this.alive=!0},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.update=function(t){var e=this,o=!this.preJumpPressed&&this.inputSource.jumpPressed;this.preJumpPressed=this.inputSource.jumpPressed,this.isAlive()||(this.moveAxisX=this.moveAxisY=0),this.node.y<0&&this.alive&&(this.alive=!1,this.gameManager.playDieSE(),this.scheduleOnce(function(){e.gameManager.die(),e.reset()},2)),this.inputSource&&this.alive&&(this.moveAxisX=this.inputSource.horizontalAxis,this.moveAxisY=this.inputSource.verticalAxis),this.gameManager.isStop()&&(this.moveAxisX=this.moveAxisY=0),0!=this._rigidbody.linearVelocity.y?this.fallDown=!0:this.fallDown=!1,0!=this.moveAxisX&&(this.node.x+=this.moveSpeed*this.moveAxisX*t,this.node.scaleX=2*this.moveAxisX),o&&this.alive&&!this.gameManager.isStop()&&(this.playerJump(this.jumpVel),console.log("dt:",t)),this.playAnimiation()},e.prototype.reset=function(){this.node.setPosition(cc.v2(70,40)),this.small=!0},e.prototype.playerJump=function(t){this.fallDown||(this._rigidbody.linearVelocity=cc.v2(0,t),this.gameManager.playJumpSE())},e.prototype.onBeginContact=function(t,e,o){var n=this,i=o.node.name,r=t.getWorldManifold().normal;if(console.log("type:",i,r.x,this.alive),this.alive){if("mushroom"==i&&(o.node.destroy(),this.becomeBig(!0),this.updatePoints(100,o.node.x,o.node.y+16)),"Flower"==i){if(this.noHurt)return;this.small?(this.alive=!1,this.moveAxisX=0,this.getComponent(cc.Sprite).spriteFrame=this.dieFrame,this.gameManager.playDieSE(),this.scheduleOnce(function(){n.fallDown||(n._rigidbody.linearVelocity=cc.v2(0,n.jumpVel)),n.scheduleOnce(function(){n.gameManager.die()},1.5)},.5)):(this.noHurt=!0,this.scheduleOnce(function(){n.noHurt=!1},3),this.becomeBig(!1))}if("Goomba"==i){if(t.disabled=!0,console.log("hit goomba",r.y),!o.getComponent(l.default).isAlive())return;if(c=r.y,-1,Math.abs(c- -1)<.001||!o.getComponent(l.default).isAlive())o.getComponent(l.default).die(),this._rigidbody.linearVelocity=cc.v2(0,this.jumpVel-100),this.gameManager.playStompSE();else{if(this.noHurt)return;this.small?(this.alive=!1,this.moveAxisX=0,this.getComponent(cc.Sprite).spriteFrame=this.dieFrame,this.gameManager.playDieSE(),this.scheduleOnce(function(){n.fallDown||(n._rigidbody.linearVelocity=cc.v2(0,n.jumpVel)),n.scheduleOnce(function(){n.gameManager.die()},1.5)},.5)):(this.noHurt=!0,this.scheduleOnce(function(){n.noHurt=!1},1.1),this.becomeBig(!1))}}var c;"Flag"==i&&(t.disabled=!0,this.gameManager.playGameFinish())}else t.disabled=!0},e.prototype.playAnimiation=function(){if(!this.isAlive())return this._animation.stop(),void(this.getComponent(cc.Sprite).spriteFrame=this.dieFrame);this.small?this._rigidbody.linearVelocity.fuzzyEquals(cc.Vec2.ZERO,.01)?0==this.moveAxisX?(this.getComponent(cc.Sprite).spriteFrame=this.smallFrame,this._animation.stop()):this._animation.getAnimationState("run_small").isPlaying||this._animation.play("run_small"):this._animation.getAnimationState("jump_small").isPlaying||this._animation.play("jump_small"):this._rigidbody.linearVelocity.fuzzyEquals(cc.Vec2.ZERO,.01)?0==this.moveAxisX?(this.getComponent(cc.Sprite).spriteFrame=this.bigFrame,this._animation.stop()):this._animation.getAnimationState("run_big").isPlaying||this._animation.play("run_big"):this._animation.getAnimationState("jump_big").isPlaying||this._animation.play("jump_big")},e.prototype.becomeBig=function(t){t?(this.small=!1,this.physicsboxCollider.size.height=26,this.physicsboxCollider.apply(),this.blanking(),this.gameManager.playBecomeBigSE()):(this.small=!0,this.physicsboxCollider.size.height=16,this.physicsboxCollider.apply(),this.blanking(),this.gameManager.playBecomeSmallSE())},e.prototype.blanking=function(){var t=cc.blink(1,10);this.node.runAction(t)},e.prototype.updatePoints=function(t,e,o){this.gameManager.updatePoints(t);var n=cc.instantiate(this.addPointsPrefab);n.setPosition(cc.v2(e,o)),cc.find("Canvas/MapManager").addChild(n),this.scheduleOnce(function(){n.destroy()},1)},e.prototype.isAlive=function(){return this.alive},e.prototype.isJumping=function(){return this.fallDown},r([d({type:cc.Enum(c)})],e.prototype,"initialFacingDirection",void 0),r([d(a.GameManager)],e.prototype,"gameManager",void 0),r([d(cc.SpriteFrame)],e.prototype,"smallFrame",void 0),r([d(cc.SpriteFrame)],e.prototype,"bigFrame",void 0),r([d(cc.SpriteFrame)],e.prototype,"dieFrame",void 0),r([d(cc.Prefab)],e.prototype,"addPointsPrefab",void 0),r([d(cc.Integer)],e.prototype,"jumpVel",void 0),r([d(cc.Float)],e.prototype,"moveSpeed",void 0),r([u],e)}(s.default);o.default=h,cc._RF.pop()},{"./GameManager":"GameManager","./Goomba":"Goomba","./input/Controller":"Controller"}],CameraTransposer:[function(t,e,o){"use strict";cc._RF.push(e,"4ac7cpRsflGC7fNti750BTj","CameraTransposer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.followTarget=null,e.followX=!0,e.followY=!0,e.minX=0,e.minY=0,e.maxX=5e3,e.maxY=1e3,e.offsetX=0,e.offsetY=0,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(){var t=cc.mat4();this.node.getLocalMatrix(t);var e=cc.mat4();this.followTarget.getWorldMatrix(e);var o=cc.v3(0,0,0);e.getTranslation(o);var n=cc.v4(o.x,o.y,o.z).transformMat4(t),i=cc.v2(n.x,n.y).add(cc.v2(-cc.view.getDesignResolutionSize().width/2,-cc.view.getDesignResolutionSize().height/2));i=cc.v2(p(this.followX?i.x:this.node.position.x,this.minX,this.maxX),p(this.followY?i.y:this.node.position.y,this.minY,this.maxY)),this.node.position=i},r([s(cc.Node)],e.prototype,"followTarget",void 0),r([s(cc.Boolean)],e.prototype,"followX",void 0),r([s(cc.Boolean)],e.prototype,"followY",void 0),r([a],e)}(cc.Component);function p(t,e,o){return t<e?e:t>o?o:t}o.default=l,cc._RF.pop()},{}],Controller:[function(t,e,o){"use strict";cc._RF.push(e,"7f936zHVb1EdLQXLLssC+x+","Controller");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("./IInputControls"),c=cc._decorator,a=(c.ccclass,c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.inputSource=null,e}return i(e,t),e.prototype.start=function(){this.registerInput(this.node.getComponents(cc.Component).find(function(t){return r.hasImplementedInputControls(t)}))},e.prototype.registerInput=function(t){null!==t&&(this.inputSource=t)},e}(cc.Component));o.default=a,cc._RF.pop()},{"./IInputControls":"IInputControls"}],GameFinish:[function(t,e,o){"use strict";cc._RF.push(e,"3cbabJymT1PranXkMO4uDDA","GameFinish");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.remainTimeNode=null,e.addPointNode=null,e}return i(e,t),e.prototype.onLoad=function(){this.node.active=!1},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.show=function(t,e){console.log("hi from game finish"),this.node.zIndex=1e3,this.node.active=!0,this.remainTimeNode.getComponent(cc.Label).string=t.toString(),this.addPointNode.getComponent(cc.Label).string=e.toString()},e.prototype.recordScore=function(t,e,o,n,i){console.log("record:",e,o,n,i),firebase.auth().onAuthStateChanged(function(r){if(r){console.log(r.uid);var c=r.uid;firebase.database().ref("userList/"+c+"/lastPlay").update({level:t,life:e,time:o,coin:n,point:i}),firebase.database().ref("userList/"+c).update({finish:1}),firebase.database().ref("userList/"+c+"/username").once("value").then(function(e){var o=e.val();console.log("username:",o);var n="bestScoreList"+t+"/",r=firebase.database().ref(n);r.once("value").then(function(t){var e=t.val()||[];console.log("scores:",e),e.push({username:o,score:i}),e.sort(function(t,e){return e.score-t.score}),e.length>5&&(e=e.slice(0,5)),r.set(e,function(t){t?console.error("error:",t):console.log("update bestScore success")})})}).catch(function(t){console.error("error:",t)})}else console.log("didn't log in")})},e.prototype.recordState=function(t,e,o,n,i){console.log("record:",e,o,n,i),firebase.auth().onAuthStateChanged(function(r){if(r){console.log(r.uid);var c=r.uid;firebase.database().ref("userList/"+c+"/lastPlay"+t).update({level:t,life:e,time:o,coin:n,point:i})}else console.log("didn't log in")})},r([s(cc.Node)],e.prototype,"remainTimeNode",void 0),r([s(cc.Node)],e.prototype,"addPointNode",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"6bd10hNEXdM+aXNT0LpqzPm","GameManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.GameManager=void 0;var c=cc._decorator,a=c.ccclass,s=c.property,l=t("./GameFinish"),p=t("./GlobalManager"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=1,e.bgm=null,e.jumpSE=null,e.stompSE=null,e.dieSE=null,e.coinSE=null,e.becomeBigSE=null,e.becomeSmallSE=null,e.gameoverSE=null,e.gameFinishSE=null,e.life=null,e.lifeCnt=5,e.time=null,e.timeCnt=300,e.updateTimer=!0,e.coin=null,e.coinCnt=0,e.points=null,e.pointsCnt=0,e.gameFinish=null,e.stopAll=!1,e}return i(e,t),e.prototype.start=function(){var t=this;if(console.log("start gameManager"),p.GlobalManager.instance){var e=p.GlobalManager.instance.restoreGameState();this.lifeCnt=e.lifeCnt,this.timeCnt=e.timeCnt,this.coinCnt=e.coinCnt,this.pointsCnt=e.pointsCnt}this.updateUI(),this.playBGM(),this.schedule(function(){t.updateTimer&&t.updateTime()},1),this.stopAll=!1},e.prototype.update=function(){0==this.timeCnt&&p.GlobalManager.instance.gameOver()},e.prototype.updateUI=function(){this.life.getComponent(cc.Label).string=this.lifeCnt.toString(),this.time.getComponent(cc.Label).string=this.timeCnt.toString(),this.coin.getComponent(cc.Label).string=this.coinCnt.toString();for(var t=this.pointsCnt.toString();t.length<5;)t="0"+t;this.points.getComponent(cc.Label).string=t},e.prototype.playBGM=function(){cc.audioEngine.playMusic(this.bgm,!0)},e.prototype.stopBGM=function(){cc.audioEngine.stopMusic()},e.prototype.playJumpSE=function(){cc.audioEngine.playEffect(this.jumpSE,!1)},e.prototype.playStompSE=function(){cc.audioEngine.playEffect(this.stompSE,!1)},e.prototype.playDieSE=function(){this.stopBGM(),cc.audioEngine.playEffect(this.dieSE,!1)},e.prototype.playCoinSE=function(){cc.audioEngine.playEffect(this.coinSE,!1)},e.prototype.playBecomeBigSE=function(){cc.audioEngine.playEffect(this.becomeBigSE,!1)},e.prototype.playBecomeSmallSE=function(){cc.audioEngine.playEffect(this.becomeSmallSE,!1)},e.prototype.playGameoverSE=function(){cc.audioEngine.playEffect(this.gameoverSE,!1)},e.prototype.playGameFinishSE=function(){cc.audioEngine.playEffect(this.gameFinishSE,!1)},e.prototype.playGameStart=function(){p.GlobalManager.instance.setLevel(this.level),p.GlobalManager.instance.saveGameState(this.lifeCnt,this.timeCnt,this.coinCnt,this.pointsCnt),cc.director.loadScene("stop")},e.prototype.playGameOver=function(){this.playGameoverSE(),p.GlobalManager.instance.gameOver(),this.gameFinish.getComponent(l.default).recordState(this.level,5,300,0,0)},e.prototype.playGameFinish=function(){var t=this;console.log("playGameFinish"),this.updateTimer=!1,this.stopBGM(),this.playGameFinishSE(),this.scheduleOnce(function(){t.stopAll=!0;var e=t.gameFinish.getComponent(l.default);e?e.show(t.timeCnt,50*t.timeCnt):console.error("GameFinish component not found on gameFinish node"),t.updatePoints(50*t.timeCnt),e.recordScore(t.level,t.lifeCnt,t.timeCnt,t.coinCnt,t.pointsCnt),e.recordState(t.level,5,300,0,0)},.5),p.GlobalManager.instance.gameFinish()},e.prototype.die=function(){this.updateLife(),0==this.lifeCnt?this.playGameOver():this.playGameStart()},e.prototype.updateLife=function(){this.lifeCnt--,this.life.getComponent(cc.Label).string=this.lifeCnt.toString()},e.prototype.updateTime=function(){this.timeCnt--,this.time.getComponent(cc.Label).string=this.timeCnt.toString()},e.prototype.updateCoin=function(t){this.coinCnt+=t,this.coin.getComponent(cc.Label).string=this.coinCnt.toString()},e.prototype.updatePoints=function(t){this.pointsCnt+=t;for(var e=this.pointsCnt.toString();e.length<5;)e="0"+e;this.points.getComponent(cc.Label).string=e},e.prototype.isStop=function(){return this.stopAll},r([s(cc.Integer)],e.prototype,"level",void 0),r([s(cc.AudioClip)],e.prototype,"bgm",void 0),r([s(cc.AudioClip)],e.prototype,"jumpSE",void 0),r([s(cc.AudioClip)],e.prototype,"stompSE",void 0),r([s(cc.AudioClip)],e.prototype,"dieSE",void 0),r([s(cc.AudioClip)],e.prototype,"coinSE",void 0),r([s(cc.AudioClip)],e.prototype,"becomeBigSE",void 0),r([s(cc.AudioClip)],e.prototype,"becomeSmallSE",void 0),r([s(cc.AudioClip)],e.prototype,"gameoverSE",void 0),r([s(cc.AudioClip)],e.prototype,"gameFinishSE",void 0),r([s(cc.Node)],e.prototype,"life",void 0),r([s(cc.Node)],e.prototype,"time",void 0),r([s(cc.Node)],e.prototype,"coin",void 0),r([s(cc.Node)],e.prototype,"points",void 0),r([s(cc.Node)],e.prototype,"gameFinish",void 0),r([a],e)}(cc.Component);o.GameManager=u,cc._RF.pop()},{"./GameFinish":"GameFinish","./GlobalManager":"GlobalManager"}],GlobalManager:[function(t,e,o){"use strict";cc._RF.push(e,"315a6v4/9VHpYdoDP+llUFt","GlobalManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalManager=void 0;var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=0,e.lifeCnt=5,e.timeCnt=300,e.coinCnt=0,e.pointsCnt=0,e.uid=-1,e.finish=!1,e.username="",e.lastPlay=null,e.records1=null,e.records2=null,e.bgm=null,e}var o;return i(e,t),o=e,e.prototype.setLevel=function(t){this.level=t},e.prototype.getLevel=function(){return this.level},e.prototype.onLoad=function(){null===o.instance?(o.instance=this,cc.game.addPersistRootNode(this.node),this.playBGM()):this.node.destroy()},e.prototype.gameStart=function(t){var e="game"+t;this.stopBGM(),cc.director.loadScene("game_start"),this.loadSceneWithDelay(e,2)},e.prototype.gameOver=function(){var t=this;cc.director.loadScene("game_over"),this.loadSceneWithDelay("levelSelect",4),this.scheduleOnce(function(){t.playBGM()},5),this.resetState()},e.prototype.gameFinish=function(){var t=this;console.log("gameFinish in GlobalManager"),this.scheduleOnce(function(){t.playBGM()},5),this.loadSceneWithDelay("levelSelect",4),this.resetState()},e.prototype.resetState=function(){this.lifeCnt=5,this.timeCnt=300,this.coinCnt=0,this.pointsCnt=0},e.prototype.loadSceneWithDelay=function(t,e){this.scheduleOnce(function(){cc.director.loadScene(t)},e)},e.prototype.saveGameState=function(t,e,o,n){this.lifeCnt=t,this.timeCnt=e,this.coinCnt=o,this.pointsCnt=n},e.prototype.restoreGameState=function(){return{lifeCnt:this.lifeCnt,timeCnt:this.timeCnt,coinCnt:this.coinCnt,pointsCnt:this.pointsCnt}},e.prototype.playBGM=function(){cc.audioEngine.isMusicPlaying()?console.log("isplaying"):cc.audioEngine.playMusic(this.bgm,!0)},e.prototype.stopBGM=function(){cc.audioEngine.stopMusic()},e.prototype.setUid=function(t){this.uid=t,Promise.all([this.getUsername(this.uid),this.getFinish(t),this.getLastPlay(this.uid),this.getRecord()]).then(function(){cc.director.loadScene("levelSelect")}).catch(function(t){return console.error("error:",t)})},e.prototype.getUid=function(){return this.uid},e.prototype.setUsername=function(t){this.username=t},e.prototype.getFinish=function(t){var e=this;return new Promise(function(o,n){""!==t?firebase.database().ref("userList/"+t+"/finish").on("value",function(t){e.finish=t.val(),null==e.finish&&(e.finish=!1),o()}):n("UID is empty")})},e.prototype.getUsername=function(t){var e=this;return console.log("uid:",t),new Promise(function(o,n){""==e.username?""!==t?firebase.database().ref("userList/"+t+"/username").on("value",function(t){e.username=t.val(),console.log("username:",e.username),o()}):n("UID is empty"):o()})},e.prototype.getLastPlay=function(t){var e=this;return new Promise(function(o,n){""!==t?firebase.database().ref("userList/"+t+"/lastPlay").on("value",function(t){e.lastPlay=t.val()||{level:1,life:5,time:300,coin:0,point:0},console.log("lastplay:",e.lastPlay),o()}):n("UID is empty")})},e.prototype.getRecord=function(){var t=this,e=firebase.database().ref("bestScoreList1/"),o=firebase.database().ref("bestScoreList2/"),n=new Promise(function(o,n){e.on("value",function(e){t.records1=e.val()||[],console.log("records1:",t.records1),o()},function(t){console.error("Error fetching bestScoreList1:",t),n(t)})}),i=new Promise(function(e,n){o.on("value",function(o){t.records2=o.val()||[],console.log("records2:",t.records2),e()},function(t){console.error("Error fetching bestScoreList2:",t),n(t)})});Promise.all([n,i]).then(function(){resolve()}).catch(function(t){reject(t)})},e.prototype.getInfo=function(){return{uid:this.uid,username:this.username,lastPlay:this.lastPlay,records1:this.records1,records2:this.records2,finish:this.finish}},e.instance=null,r([s(cc.AudioClip)],e.prototype,"bgm",void 0),o=r([a],e)}(cc.Component);o.GlobalManager=l,cc._RF.pop()},{}],Goomba:[function(t,e,o){"use strict";cc._RF.push(e,"09049byajdEE74yWjHWqIo9","Goomba");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=t("./GameManager"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dieFrame=null,e.direction="right",e.alive=!0,e.startMove=!1,e.fallDown=!1,e._rigidbody=null,e.moveSpeed=130,e.gameManager=null,e.addPointsPrefab=null,e.player=null,e}return i(e,t),e.prototype.start=function(){this._rigidbody=this.getComponent(cc.RigidBody)},e.prototype.onLoad=function(){this.walk()},e.prototype.update=function(t){this._rigidbody.linearVelocity.y<-1e-4?this.fallDown=!0:this.fallDown=!1,!this.startMove&&Math.abs(this.player.x-this.node.x)<650&&(this.startMove=!0),this.fallDown||!this.startMove||this.gameManager.isStop()||(this.node.x+=this.moveSpeed*t*("right"==this.direction?1:"stop"==this.direction?0:-1))},e.prototype.onBeginContact=function(t,e,o){var n;n=t.getWorldManifold().normal.x,(Math.abs(n-0)<.001||"box_0"!=o.node.name)&&"Goomba"!=o.node.name||(this.direction="right"==this.direction?"left":"right")},e.prototype.die=function(){var t=this;this.direction="stop",this.getComponent(cc.Sprite).spriteFrame=this.dieFrame,this.alive=!1,this.updatePoints(100,this.node.x,this.node.y+16),this.getComponent(cc.PhysicsBoxCollider).sensor=!0,this._rigidbody.linearVelocity=cc.v2(0,-5500),this.scheduleOnce(function(){t.destroy()},2)},e.prototype.walk=function(){var t=this;this.schedule(function(){t.fallDown||t.gameManager.isStop()||(t.node.scaleX=2==t.node.scaleX?-2:2)},.1)},e.prototype.updatePoints=function(t,e,o){this.gameManager.updatePoints(t);var n=cc.instantiate(this.addPointsPrefab);n.setPosition(cc.v2(e,o)),n.setScale(2,2),cc.find("Canvas/MapManager").addChild(n),this.scheduleOnce(function(){n.destroy()},.5)},e.prototype.isAlive=function(){return this.alive},r([s(cc.SpriteFrame)],e.prototype,"dieFrame",void 0),r([s(cc.String)],e.prototype,"direction",void 0),r([s(cc.Float)],e.prototype,"moveSpeed",void 0),r([s(l.GameManager)],e.prototype,"gameManager",void 0),r([s(cc.Prefab)],e.prototype,"addPointsPrefab",void 0),r([s(cc.Node)],e.prototype,"player",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./GameManager":"GameManager"}],IInputControls:[function(t,e,o){"use strict";cc._RF.push(e,"cf693sO3mhI86Dn7J3PESlJ","IInputControls"),Object.defineProperty(o,"__esModule",{value:!0}),o.hasImplementedInputControls=o.ButtonState=void 0,function(t){t[t.Rest=0]="Rest",t[t.Pressed=1]="Pressed",t[t.Held=2]="Held",t[t.Released=3]="Released"}(o.ButtonState||(o.ButtonState={})),o.hasImplementedInputControls=function(t){return t&&void 0!==t.horizontalAxis&&void 0!==t.verticalAxis&&void 0!==t.attack&&void 0!==t.interact&&void 0!==t.jumpPressed&&void 0!==t.downPressed&&void 0!==t.enterPressed},cc._RF.pop()},{}],KeyboardControls:[function(t,e,o){"use strict";cc._RF.push(e,"8f167idUHNCkL4mlzLCyE+I","KeyboardControls");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./IInputControls"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hAxis=0,e._vAxis=0,e.jump_pressed=!1,e.down_pressed=!1,e.enter_pressed=!1,e._zKey=c.ButtonState.Rest,e}return i(e,t),Object.defineProperty(e.prototype,"horizontalAxis",{get:function(){return this._hAxis},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalAxis",{get:function(){return this._vAxis},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jumpPressed",{get:function(){return this.jump_pressed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"downPressed",{get:function(){return this.down_pressed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enterPressed",{get:function(){return this.enter_pressed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attack",{get:function(){return this._zKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"interact",{get:function(){return this._zKey},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.right:this._hAxis++;break;case cc.macro.KEY.left:this._hAxis--;break;case cc.macro.KEY.up:this.jump_pressed=!0;break;case cc.macro.KEY.down:this.down_pressed=!0;break;case cc.macro.KEY.enter:this.enter_pressed=!0}switch(this._vAxis=p(this._vAxis),this._hAxis=p(this._hAxis),this._zKey){case c.ButtonState.Rest:case c.ButtonState.Released:this._zKey=c.ButtonState.Pressed;break;case c.ButtonState.Pressed:case c.ButtonState.Held:this._zKey=c.ButtonState.Held}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.right:this._hAxis--;break;case cc.macro.KEY.left:this._hAxis++;break;case cc.macro.KEY.up:this.jump_pressed=!1;break;case cc.macro.KEY.down:this.down_pressed=!1;break;case cc.macro.KEY.enter:this.enter_pressed=!1}switch(this._vAxis=p(this._vAxis),this._hAxis=p(this._hAxis),this._zKey){case c.ButtonState.Rest:case c.ButtonState.Released:this._zKey=c.ButtonState.Rest;break;case c.ButtonState.Pressed:case c.ButtonState.Held:this._zKey=c.ButtonState.Released}},r([s],e)}(cc.Component));function p(t,e,o){return void 0===e&&(e=-1),void 0===o&&(o=1),t<e?e:t>o?o:t}o.default=l,cc._RF.pop()},{"./IInputControls":"IInputControls"}],arrow:[function(t,e,o){"use strict";cc._RF.push(e,"92691p2ZWdG6qBr12enM/WG","arrow");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,t("./input/Controller")),l=t("./GlobalManager"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.quit=!1,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.update=function(){this.inputSource&&(this.inputSource.enterPressed&&(this.quit?this.quitGame():this.continueGame()),!this.quit&&this.inputSource.downPressed&&(this.quit=!0),this.quit&&this.inputSource.jumpPressed&&(this.quit=!1)),this.quit?this.node.setPosition(cc.v2(-336.118,-126.006)):this.node.setPosition(cc.v2(-336.118,.994))},e.prototype.quitGame=function(){var t=l.GlobalManager.instance.getLevel(),e=l.GlobalManager.instance.restoreGameState(),o=e.lifeCnt,n=e.timeCnt,i=e.coinCnt,r=e.pointsCnt;this.recordState(t,o,n,i,r),cc.director.loadScene("levelSelect")},e.prototype.continueGame=function(){var t="game"+l.GlobalManager.instance.getLevel();l.GlobalManager.instance.loadSceneWithDelay(t,3),cc.director.loadScene("game_start")},e.prototype.recordState=function(t,e,o,n,i){console.log("record:",e,o,n,i);var r=l.GlobalManager.instance.getUid();firebase.database().ref("userList/"+r+"/lastPlay"+t).update({level:t,life:e,time:o,coin:n,point:i})},r([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./GlobalManager":"GlobalManager","./input/Controller":"Controller"}],coin:[function(t,e,o){"use strict";cc._RF.push(e,"d420ds0lPlLo4ioJsChb0bc","coin");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e}return i(e,t),e.prototype.start=function(){var t=this;this.anim=this.getComponent(cc.Animation);var e=cc.sequence(cc.moveBy(1,0,100).easing(cc.easeCubicActionOut()),cc.moveBy(.8,0,-100).easing(cc.easeCubicActionIn()));this.scheduleOnce(function(){t.node.runAction(e)},0)},e.prototype.update=function(){this.anim.getAnimationState("coin").isPlaying||this.anim.play("coin")},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],flower:[function(t,e,o){"use strict";cc._RF.push(e,"e7e7fRszGpMPrw5ddRTFJLj","flower");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass;c.property;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.startWalk=!1,e}return i(e,t),e.prototype.start=function(){this.anim=this.getComponent(cc.Animation),this.anim.play("flower"),this.walk()},e.prototype.onLoad=function(){},e.prototype.update=function(){this.anim.getAnimationState("flower").isPlaying||this.anim.play("flower")},e.prototype.walk=function(){this.startWalk=!0;var t=cc.moveBy(1.5,0,-70),e=cc.moveBy(1.5,0,70),o=cc.delayTime(2),n=cc.delayTime(.4),i=cc.sequence(t,o,e,n);this.node.runAction(cc.repeatForever(i))},r([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],leaderBoard:[function(t,e,o){"use strict";cc._RF.push(e,"4cb232LL+dLEKYQ9OW7zTWv","leaderBoard");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=t("./GlobalManager"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uid=-1,e.username="",e.lastPlay=null,e.name1=null,e.name2=null,e.name3=null,e.name4=null,e.name5=null,e.score1=null,e.score2=null,e.score3=null,e.score4=null,e.score5=null,e.level=1,e.records=null,e}return i(e,t),e.prototype.start=function(){var t=l.GlobalManager.instance.getInfo();for(this.uid=t.uid,this.lastPlay=t.lastPlay,this.username=t.username,1==this.level?this.records=t.records1:this.records=t.records2;this.records.length<5;)this.records.push({username:"- - - -",score:"00000"});this.setNode()},e.prototype.setNode=function(){console.log("setNode"),this.name1.getComponent(cc.RichText).string="<outline color=black>"+this.records[0].username+" </outline>",this.name2.getComponent(cc.RichText).string="<outline color=black>"+this.records[1].username+" </outline>",this.name3.getComponent(cc.RichText).string="<outline color=black>"+this.records[2].username+" </outline>",this.name4.getComponent(cc.RichText).string="<outline color=black>"+this.records[3].username+" </outline>",this.name5.getComponent(cc.RichText).string="<outline color=black>"+this.records[4].username+" </outline>",this.score1.getComponent(cc.Label).string=this.records[0].score,this.score2.getComponent(cc.Label).string=this.records[1].score,this.score3.getComponent(cc.Label).string=this.records[2].score,this.score4.getComponent(cc.Label).string=this.records[3].score,this.score5.getComponent(cc.Label).string=this.records[4].score},r([s(cc.Node)],e.prototype,"name1",void 0),r([s(cc.Node)],e.prototype,"name2",void 0),r([s(cc.Node)],e.prototype,"name3",void 0),r([s(cc.Node)],e.prototype,"name4",void 0),r([s(cc.Node)],e.prototype,"name5",void 0),r([s(cc.Node)],e.prototype,"score1",void 0),r([s(cc.Node)],e.prototype,"score2",void 0),r([s(cc.Node)],e.prototype,"score3",void 0),r([s(cc.Node)],e.prototype,"score4",void 0),r([s(cc.Node)],e.prototype,"score5",void 0),r([s(cc.Integer)],e.prototype,"level",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./GlobalManager":"GlobalManager"}],levelSelect:[function(t,e,o){"use strict";cc._RF.push(e,"e8e8bHWTrRPmo9F9NKTYkAh","levelSelect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=t("./GlobalManager"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.usernameNode=null,e.LB1=null,e.LB2=null,e.YN1=null,e.YN2=null,e.uid=-1,e.username="",e.lastPlay=null,e}return i(e,t),e.prototype.start=function(){l.GlobalManager.instance.playBGM(),this.LB1.active=!1,this.LB2.active=!1,this.YN1.active=!1,this.YN2.active=!1;var t=new cc.Component.EventHandler,e=new cc.Component.EventHandler;t.target=this.node,t.component="levelSelect",t.handler="loadLevel1Scene",e.target=this.node,e.component="levelSelect",e.handler="loadLevel2Scene";var o=new cc.Component.EventHandler;o.target=this.node,o.component="levelSelect",o.handler="openLeaderBoard";var n=new cc.Component.EventHandler;n.target=this.node,n.component="levelSelect",n.handler="openLeaderBoard2";var i=new cc.Component.EventHandler;i.target=this.node,i.component="levelSelect",i.handler="closeLeaderBoard";var r=new cc.Component.EventHandler;r.target=this.node,r.component="levelSelect",r.handler="closeLeaderBoard2";var c=new cc.Component.EventHandler;c.target=this.node,c.component="levelSelect",c.handler="readOld1";var a=new cc.Component.EventHandler;a.target=this.node,a.component="levelSelect",a.handler="readOld2";var s=new cc.Component.EventHandler;s.target=this.node,s.component="levelSelect",s.handler="reStart1";var p=new cc.Component.EventHandler;p.target=this.node,p.component="levelSelect",p.handler="reStart2";var u=new cc.Component.EventHandler;u.target=this.node,u.component="levelSelect",u.handler="logOut",cc.find("Canvas/Btn1").getComponent(cc.Button).clickEvents.push(t),cc.find("Canvas/Btn2").getComponent(cc.Button).clickEvents.push(e),cc.find("Canvas/LeaderBoardBtn").getComponent(cc.Button).clickEvents.push(o),cc.find("Canvas/LeaderBoardBtn2").getComponent(cc.Button).clickEvents.push(n),cc.find("Canvas/LogOutBtn").getComponent(cc.Button).clickEvents.push(u),cc.find("Canvas/wrap1/GoBack").getComponent(cc.Button).clickEvents.push(i),cc.find("Canvas/wrap2/GoBack").getComponent(cc.Button).clickEvents.push(r),cc.find("Canvas/YN1/YES1").getComponent(cc.Button).clickEvents.push(c),cc.find("Canvas/YN1/NO1").getComponent(cc.Button).clickEvents.push(s),cc.find("Canvas/YN2/YES2").getComponent(cc.Button).clickEvents.push(a),cc.find("Canvas/YN2/NO2").getComponent(cc.Button).clickEvents.push(p)},e.prototype.update=function(){var t=l.GlobalManager.instance.getInfo();this.uid=t.uid,this.lastPlay=t.lastPlay,this.username=t.username,t.finish&&(cc.find("Canvas/Btn2").getComponent(cc.Button).interactable=!0),this.setHeaderNode()},e.prototype.loadLevel1Scene=function(){this.YN1.active=!0},e.prototype.loadLevel2Scene=function(){this.YN2.active=!0},e.prototype.openLeaderBoard=function(){this.LB1.active=!0},e.prototype.openLeaderBoard2=function(){this.LB2.active=!0},e.prototype.closeLeaderBoard=function(){this.LB1.active=!1},e.prototype.closeLeaderBoard2=function(){this.LB2.active=!1},e.prototype.readOld1=function(){this.loadOldRecord(1)},e.prototype.readOld2=function(){this.loadOldRecord(2)},e.prototype.reStart1=function(){this.restart(1)},e.prototype.reStart2=function(){this.restart(2)},e.prototype.logOut=function(){firebase.auth().signOut().then(function(){alert("Log out successfully! ByeBye"),cc.director.loadScene("menu")}).catch(function(t){return alert("log in fail, "+t)})},e.prototype.restart=function(t){l.GlobalManager.instance.gameStart(t);l.GlobalManager.instance.saveGameState(5,300,0,0)},e.prototype.loadOldRecord=function(t){l.GlobalManager.instance.gameStart(t);var e=l.GlobalManager.instance.getUid();firebase.database().ref("userList/"+e+"/lastPlay"+t).once("value").then(function(t){var e=t.val()||{life:5,time:300,coin:0,point:0};l.GlobalManager.instance.saveGameState(e.life,e.time,e.coin,e.point)})},e.prototype.setHeaderNode=function(){var t=this.username;this.usernameNode.getComponent(cc.RichText).string="<outline color=black>"+t+"</outline>"},r([s(cc.Node)],e.prototype,"usernameNode",void 0),r([s(cc.Node)],e.prototype,"LB1",void 0),r([s(cc.Node)],e.prototype,"LB2",void 0),r([s(cc.Node)],e.prototype,"YN1",void 0),r([s(cc.Node)],e.prototype,"YN2",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./GlobalManager":"GlobalManager"}],login:[function(t,e,o){"use strict";cc._RF.push(e,"63ef2IHdPBNo5GCRNSPw9wX","login");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,t("./GlobalManager")),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="login",t.handler="clickEnter";var e=new cc.Component.EventHandler;e.target=this.node,e.component="login",e.handler="goBack",cc.find("Canvas/Form_background/Enter").getComponent(cc.Button).clickEvents.push(t),cc.find("Canvas/Form_background/GoBack").getComponent(cc.Button).clickEvents.push(e)},e.prototype.goBack=function(){cc.director.loadScene("menu")},e.prototype.clickEnter=function(){var t=cc.find("Canvas/Form_background/Email").getComponent(cc.EditBox).string,e=cc.find("Canvas/Form_background/Password").getComponent(cc.EditBox).string;console.log("Email:",t),console.log("Password:"),firebase.auth().signInWithEmailAndPassword(t,e).then(function(t){var e=t.user;return console.log("user:",e),e.uid}).then(function(t){alert("Log in successfully!"),s.GlobalManager.instance.setUid(t)}).catch(function(t){return alert("log in fail, "+t)})},r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./GlobalManager":"GlobalManager"}],menu:[function(t,e,o){"use strict";cc._RF.push(e,"5d6b5AcJxhKOp46C4Fc9DOs","menu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){var t=new cc.Component.EventHandler,e=new cc.Component.EventHandler;t.target=this.node,t.component="menu",t.handler="loadLoginScene",e.target=this.node,e.component="menu",e.handler="loadSignupScene",cc.find("Canvas/loginBtn").getComponent(cc.Button).clickEvents.push(t),cc.find("Canvas/signupBtn").getComponent(cc.Button).clickEvents.push(e),console.log(cc.find("Canvas/loginBtn").getComponent(cc.Button).clickEvents)},e.prototype.loadLoginScene=function(){cc.director.loadScene("login")},e.prototype.loadSignupScene=function(){cc.director.loadScene("signup")},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],platform:[function(t,e,o){"use strict";cc._RF.push(e,"de902iPIBRIX7VGRDQv5mWx","platform");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.checkCollide=function(t,e,o){var n=t.getWorldManifold().normal,i=o.getAABB(),r=e.getAABB(),c=i.yMin+5,a=r.yMax;1!=n.y?t.disabled=!0:"Player"==o.node.name&&c<a&&(t.disabled=!0)},e.prototype.onBeginContact=function(t){var e=t.colliderA,o=t.colliderB;this.checkCollide(t,e,o)},e.prototype.onEndContact=function(t){var e=t.colliderA,o=t.colliderB;this.checkCollide(t,e,o)},e.prototype.onPreSolve=function(t){var e=t.colliderA,o=t.colliderB;this.checkCollide(t,e,o)},e.prototype.onPostSolve=function(t){var e=t.colliderA,o=t.colliderB;this.checkCollide(t,e,o)},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],question_box:[function(t,e,o){"use strict";cc._RF.push(e,"9e11aHIWt5MlLu/qZJRCCKm","question_box");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=t("./ActorController"),p=t("./GameManager"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touched=!1,e.anim=null,e.coinBox=!0,e.coinPrefab=null,e.endFrame=null,e.mushroomPrefab=null,e.gameManager=null,e.addPointsPrefab=null,e}return i(e,t),e.prototype.start=function(){this.anim=this.getComponent(cc.Animation),this.anim.play("question_box").repeatCount=1/0,console.log("play:",this.anim.getAnimationState("question_box").isPlaying)},e.prototype.onLoad=function(){},e.prototype.onBeginContact=function(t,e,o){var n=this,i=t.getWorldManifold().normal;if(!this.touched&&"Player"==o.node.name&&-1==i.y&&o.getComponent(l.default).isAlive())if(this.touched=!0,this.anim.stop(),this.getComponent(cc.Sprite).spriteFrame=this.endFrame,this.coinBox){this.updatePoints(100,e.node.x,e.node.y+32),this.gameManager.playCoinSE(),this.scheduleOnce(function(){n.gameManager.updateCoin(1)},1.5);var r=cc.instantiate(this.coinPrefab);r.setPosition(cc.v2(e.node.x,e.node.y+32)),cc.find("Canvas/MapManager").addChild(r),this.scheduleOnce(function(){r.destroy()},2.3)}else{var c=cc.instantiate(this.mushroomPrefab);c.setPosition(cc.v2(e.node.x,e.node.y+32)),cc.find("Canvas/MapManager").addChild(c)}},e.prototype.isTouch=function(){return this.touched},e.prototype.updatePoints=function(t,e,o){this.gameManager.updatePoints(t);var n=cc.instantiate(this.addPointsPrefab);n.setPosition(cc.v2(e,o)),cc.find("Canvas/MapManager").addChild(n),this.scheduleOnce(function(){n.destroy()},1)},r([s(cc.Boolean)],e.prototype,"coinBox",void 0),r([s(cc.Prefab)],e.prototype,"coinPrefab",void 0),r([s(cc.SpriteFrame)],e.prototype,"endFrame",void 0),r([s(cc.Prefab)],e.prototype,"mushroomPrefab",void 0),r([s(p.GameManager)],e.prototype,"gameManager",void 0),r([s(cc.Prefab)],e.prototype,"addPointsPrefab",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./ActorController":"ActorController","./GameManager":"GameManager"}],signup:[function(t,e,o){"use strict";cc._RF.push(e,"15f06VIZsxAwK5Yp/RyjFXL","signup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,t("./GlobalManager")),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="signup",t.handler="clickEnter";var e=new cc.Component.EventHandler;e.target=this.node,e.component="signup",e.handler="goBack",cc.find("Canvas/Form_background/Enter").getComponent(cc.Button).clickEvents.push(t),cc.find("Canvas/Form_background/GoBack").getComponent(cc.Button).clickEvents.push(e)},e.prototype.goBack=function(){cc.director.loadScene("menu")},e.prototype.clickEnter=function(){console.log("hi");var t=cc.find("Canvas/Form_background/Username").getComponent(cc.EditBox).string,e=cc.find("Canvas/Form_background/Email").getComponent(cc.EditBox).string,o=cc.find("Canvas/Form_background/Password").getComponent(cc.EditBox).string;console.log("Username:",t),console.log("Email:",e),console.log("Password:",o),firebase.auth().createUserWithEmailAndPassword(e,o).then(function(t){var e=t.user;return console.log("user:",e),e.uid}).then(function(o){firebase.database().ref("userList/"+o).update({username:t,email:e}),s.GlobalManager.instance.setUid(o),s.GlobalManager.instance.setUsername(t)}).then(function(){alert("Sign up successfully!")}).catch(function(t){return alert("log in fail, "+t)})},r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./GlobalManager":"GlobalManager"}]},{},["ActorController","GameFinish","GameManager","GlobalManager","Goomba","arrow","CameraTransposer","coin","flower","Controller","IInputControls","KeyboardControls","leaderBoard","levelSelect","login","menu","platform","question_box","signup"]);